# Krav

- K1 Minska det manuella arbetet för styrning av lamporna beroende på hur mörkt det är ute. Lamporna ska tändas automatiskt när det är kvällstid och släckas när det är dagtid 


- K2 Objekts rörelse kan detekteras och då ska ljusstyrkan på belysningen ändras i realtid. Detta innebär att ljuset kommer att minskas eller ökas automatiskt beroende på om det finns närvaro eller inte


- K3 Lamporna ska kommunicera med varandra genom att använda IoT enheter

- K4 Att göra en prototyp av smart street lights så att lamporna kommuniceras med varandra

- K5 Upptäck den trasiga lampan och skicka denna information till serven

# Test
| Vilken del av systemet testas |Input  |Beteende |Resultat|
|:------------- |:---------------:| -------------:| -------------:|
| K1.1 Photoresistor med ett visst avstånd|Kopplade photoresistor med LED och kodade. Testade täcka photoresitorn med ett viss avstånd så att ljus inte når photoresistorn | LED ska lysa när det är mökt | Fail
| K1.2 Photoresistor med ganska nära avstånd|Kopplade photoresistor med LED och kodade. Testade täcka photoresitorn med ett kort avstånd eller lägga finger på photoresitorn så att nästan inget ljus släpps in | LED ska lysa när det är mökt | Pass
| K2.1 Vi testade röra oss 1 m från pir sensor| Kopplade pir sensor till pycomenheten och kodade för pir sensorn. Placerade sedan den i en korridor. Ett måttband användes för att säkerställa att det är 1 m ifrån sensorn.| Vi rörde oss 1 m från sensorn. Pir sensor ska detektera rörelsen och det ska printa ut "Motion detected" på konsolen| Pass
| K2.2 Vi testade röra oss 2 m från pir sensor|Kopplade pir sensor till pycomenheten och kodade. Placerade sedan den i en korridor. Ett måttband användes för att för att säkerställa att det är 2 m ifrån sensorn.| Vi rörde oss 2 m från sensorn. Pir sensor ska detektera rörelsen och det ska printa ut "Motion detected" på konsolen| Pass
| K2.3 Vi testade röra oss 3 m från pir sensor|Kopplade pir sensor till pycomenheten och kodade. Placerade sedan den i en korridor. Ett måttband användes för att för att säkerställa att det är 3 m ifrån sensorn.| Vi rörde oss 3 m från sensorn. Pir sensor ska detektera rörelse och det ska printa ut "Motion detected" på konsolen| Pass
| K2.4 Vi testade röra oss 4 m från pir sensor|Kopplade pir sensor till pycomenheten och kodade. Placerade sedan den i en korridor. Ett måttband användes för att för att säkerställa att det är 4 m ifrån sensorn.|Vi rörde oss 4 m från sensorn. Pir sensor ska detektera rörelse och det ska printa ut "Motion detected" på konsolen| Pass
| K2.5 Vi testade röra oss 5 m från pir sensor|Kopplade pir sensor till pycomenheten och kodade. Placerade sedan den i en korridor. Ett måttband användes för att för att säkerställa att det är 5 m ifrån sensorn.|Vi rörde oss 5 m från sensorn. Pir sensor ska detektera rörelse och det ska printa ut "Motion detected" på konsolen| Pass men sensorn missade att känna av rörelsen någon enstaka gång
| K2.6 Vi testade röra oss 6 m från pir sensor|Kopplade pir sensor till pycomenheten och kodade. Placerade sedan den i en korridor. Ett måttband användes för att för att säkerställa att det är 6 m ifrån sensorn.|Vi rörde oss 6 m från sensorn. Pir sensor ska detektera rörelse och det ska printa ut "Motion detected" på konsolen| Fail, sensorn missade att känna av rörelsen 
| K2.7 Vi testade röra oss 7 m från pir sensor|Kopplade pir sensor till pycomenheten och kodade. Placerade sedan den i en korridor. Ett måttband användes för att för att säkerställa att det är 7 m ifrån sensorn.|Vi rörde oss 7 m från sensorn. Pir sensor ska detektera rörelse och det ska printa ut "Motion detected" på konsolen| Fail, sensorn missade att känna av rörelsen 
| K3.1 Lamporna kommunicerades vid MQTT serven|K1.2, K2.1 - K2.5. Vi testade med två lampor och varje lampa kopplades till en lopy. Pir sensor kopplades till första lampan. Vi kodade så att när den första lampan som hade pir sensorn kände av rörelse så skulle de skicka ett meddelande till MQTT serven (Adafruit) via wifi. Den andra lampan som inte hade pir sensorn skulle ta emot meddelande från serven. |Vi förväntade oss att lamporna skulle tändas direkt efter varandra när den ena lampan  kände av rörelsen| Fail, det tog ett tag innan den andra lampan utan pir tändades
| K3.2 Två stycken lopy kommunicerades direkt till varandra via Lora| Vi började koppla Lora antenn till de två lopy. Vi testade koden från pycoms hemsida där den ena lopy skickade signalen Ping så skulle den andra ta emot signalen Pong| Vi förväntade oss att de bara skickade signaler till varandra. Den ena lopy skulle printa ut Ping på konsolen när den hade skickat ett meddelande. Och den andra lopy skulle printa ut pong när det hade fått Ping meddelande| Pass
| K3.3 Lamporna kommunicerades med varandra via Lora| K1.2, K2.1 - K2.5, K3.2.  Vi testade med två stycken lampor. Varje lampa skulle koppla till en lopy med en Lora antenn. Det är bara den första lampan som hade pir sensor. Sedan kodade vi så att när den första lampan kände av rörelsen så skulle den tändas på 100 % och samtidigt skickade ett meddelande till andra lampan. Och när den andra lampan fick ett meddelande från den första lampan då skulle den också tändas. I vanliga fall (när det inte fanns rörelse omrking) skulle lampornas ljusstyrka vara på 25 %| Lamporna skulle tändas efter varandra utan att behöva vänta länge| Pass
|K4.1 Koppling av alla komponenter och testning av en prototyp|K1.2, K2.1 - K2.5, K3.2, K3.3. Vi byggde en prototyp som demonsterade en väg med lampor. Vi testade att skapa rörelse framför sensor och kolla lampornas beteende och hur de kommunicerade. Två lopy användes. För varje lopy kopplades 3 led till. En pir sensor användes istället för 2 eftersom en av vår sensor slutade funka. Den andra pir hade vi tänkt att detektera rörelse från andra hållet istället. Vi utgick från att den andra pir skulle fungera på samma sätt.|Att prototypen skulle funka, dvs koppling av alla komponenter fungerade och lamporna kommunicerades med varandra| Pass
|K5.1 Meddelande skickades till TTN via Lora |K4.1 För att skicka information om den trasiga lampan till serven TTN har vi tänkt först att omvandla LED pins till anolog pins för att få ut ett värde. Och sedan testade att ta bort lampan (vi tänker att det är samma som en trasig lampa) och se vilket man skulle få. |Att kunna få ett värde om den trasiga lampan på TTN | Fail, vi fick olika värden varje gång 
|K5.2 Meddelande skickades till TTN via Lora |K4.1 Denna gång testade vi att göra extra anolog pins till LED och vi använde koden från pycom adc för att läsa av ett anolog värde. När lampan togs bort så betraktade vi som en trasig lampa |Att kunna få ett värde om den trasiga lampan på TTN | Pass,  vi fick samma värden varje gång när vi tog bort lampan 
